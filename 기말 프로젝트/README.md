# 2017182018 신다인 기말 프로젝트

## 1. 게임의 소개
 - spelunky
 - spelunky는 로그라이크 게임으로, 새롭게 시작할 때마다 지형지물이 변화하고 만약 죽는다면 처음부터 시작한다.
 - 플레이어는 스테이지로 구성된 맵들을 하나 하나 통과해 나가며 진행하게 된다.
 - 각 스테이지에는 스테이지 특색에 맞는 함정과 몬스터가 있다.
![Game Play image1](https://steamcdn-a.akamaihd.net/steam/apps/239350/ss_8fb56a4fb17d6c777c12952d6642652b063b5528.1920x1080.jpg)
![Game Play image2](https://steamcdn-a.akamaihd.net/steam/apps/239350/ss_b2d531be63261ac6627511b8a0ea7fe1c2ddb8b6.1920x1080.jpg)
 - 게임은 죽거나 스테이지의 끝에 도달할 때까지 진행되며, 출구로 나가거나 보스를 처치해야 한다.

## 2. GameState (Scene) 의 수 및 각각의 이름
 1. 로고 - LogoState
 2. 메뉴 선택 - TitleState
 3. 스테이지 - StageState
 4. 결과 - ResultState
 5. 사망 - DieState
 6. 일시 정지 - PauseState

## 3. 각 GameState 별 다음 항목
 1. 로고 - LogoState
 	- 게임의 제목이 등장하는 화면이다.
 	- 게임의 로고 화면, 'Press Any Key' 이미지
 	- 키보드 입력 - 메뉴화면으로 이동한다.
 	- 키보드 입력 - Titlestate로 이동

 2. 메뉴 선택 - TitleState
  	- 시작과 종료를 선택할 수 있는 메뉴 화면이다.
  	- 메뉴화면 배경, 'Game Start' 버튼, 'Exit' 버튼
  	- 'z' : 결정
  	  방향키 위아래 : 메뉴 이동 
  	- 'Game Start' 버튼 선택 - StageState로 이동

 3. 스테이지 - StageState
 	- 플레이어와 스테이지가 출력된다.
 	- 플레이어, 스테이지 타일,스테이지 배경, 함정, 몬스터, 상점, NPC
 	- 방향키 : 플레이어 이동
 	  'z' : 공격, 잡기
 	  'x' : 점프
 	  'a' : 폭탄
 	  's' : 로프
 	  'ESC'키 : 일시 정지, PauseState로 이동
 	- 플레이어 사망 - DieState로 이동 
 	  스테이지 클리어 - ResultState로 이동

 4. 결과 - ResultState
 	- 스테이지가 끝난 후 결과 출력
 	- 결과창, 플레이어 이동 애니메이션, 총점
 	- 'z'키 : 확인, StageState로 복귀
 5. 사망 - DieState
 	- 캐릭터 사망시 사망 원인 출력 
 	- 사망 결과창, 플레이어 현재 상황, 재시작 버튼, 메뉴로 이동 버튼
 	- 'z' : 결정
 	- 재시작 버튼 선택 - StageState로 이동 
 	  메뉴로 이동 버튼 - TitleState로 이동
 6. 일시 정지 - PauseState
 	- 진행중인 게임을 잠시 멈추고 메뉴를 출력
 	- 일시 정지 창, 메뉴로 이동 버튼, 끝내기 버튼, 재시작 버튼, 계속하기 버튼
 	- 'z' : 결정
 	  'ESC' : StageState로 복귀
  	  방향키 위아래 : 메뉴 이동 
 	- 스테이지에서 esc키를 입력시 출력

![Sheet](/img/State.png)

## 4. 필요한 기술
- 애니메이션
- 시간에 따른 이벤트
- 키보드 입력
- 몬스터 인공지능
- 무작위적인 지형 생성
- 오브젝트
- 충돌 처리
- 스크롤링
- 타일링

## 5. 게임의 흐름과 구성
![Sheet](/img/Main.PNG)
![Sheet](/img/GameProgress.PNG)

## 6. 개발 범위 및 계획
![Sheet](/img/Width.PNG)
![Sheet](/img/Plan.PNG)

## 7. 11-23 기준 완성도
![Sheet](/img/11_23.PNG)
![Sheet](/img/capture.PNG)
![Sheet](/img/boom_capture.PNG)

## 8. class 구성
 1. 플레이어
 	- 타일과의 상호작용
 		- 사다리, 진로방해
 	- 공격, 점프, 숙이기
 2. 타일
	- 타일 그리기 
 3. 카메라
	- 플레이어 위치를 받아 그릴 화면 영역 계산
	- 왼쪽과 아래쪽 격차 계산 후 반환
 4. 스테이지 생성
	- 입구와 출구를 선정
	- 입구에서 랜덤한 방향으로 방을 선정
	- 작은 스테이지를 읽어옴
	- 입구에서 출구까지 연결이 되도록 스테이지를 생성

## 9. 3차 발표
![Sheet](/img/구현범위.PNG)

 1. 플레이어
	- 위 : 위를 보기(카메라 시점이 올라간다.), 사다리 위로 이동
	- 아래 : 숙이기(카메라 시점이 내려간다.), 사다리 아래로 이동
	- 좌, 우: 좌우로 이동 가능
	
	- A키 : 결정, 로프 생성
	- S키 : 폭탄 던지기
	- Z키 : 점프(높낮이 조절 가능)
	- X키 : 공격\

	적들을 밣아서 죽일 수 있다.\
	물체를 숙인상태로 공격하여 주울 수 있다.\
	위나 아래키를 이용하여 폭탄이나 로프, 들고 있는 물체의 던질 각도를 정할 수 있다.\
	사다리를 오르내릴 수 있다.\
	피격 시 깜빡이게 되고 이때 동안은 무적이다.\

 2. 몬스터 
	- 뱀 : 가만히 있거나 좌우로 이동
	- 거미 : 점프를 뛰며 이동

	- 기본적으로 몬스터에 닿을 시 플레이어의 life가 줄어든다.

 3. 방해요소
 	- 화살 함정 : 무언가가 앞을 지나가면 화살을 발사한다.
 	- 가시 : 플레이어가 위로 떨어지면 즉사시킨다.
 	- UFO : 일정 시간이 지나게 되면 생성되어 플레이어를 추적한다.
 	  (등장 시 bgm이 바뀐다. 주기적으로 폭발한다.)

 4. 아이템 
 	- 기본적으로 4개의 로프와 4개의 폭탄을 가지고 시작한다.
 	- 나무상자를 부숴 추가적인 아이템을 얻을 수 있다.
 	- 보물상자를 부숴 점수 아이템을 얻을 수 있다.

 5. 진행 방식
 	- 스테이지는 무작위적으로 생성된다.
 	- 최대한 빨리 다음 스테이지로 이동하는 것도 중요하지만, 점수 아이템을 먹지 않으면 점수는 오르지 않는다.
 	- 플레이어의 life는 처음 시작한 5개가 최대이며 더 얻을 수 없으므로 신중해야 한다.

![Sheet](/img/최종커밋횟수.PNG)
![Sheet](/img/인터뷰.PNG)